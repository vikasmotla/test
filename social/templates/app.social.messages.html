{% load staticfiles %}

<!DOCTYPE html>
<html ng-app="app" ng-controller="app.social.socialMessages" id="main">

<head>
  <meta charset="utf-8">
  <title>{{BRAND_NAME}} - ERP Messages</title>
  <meta name="viewport" content="initial-scale=1">
  <!-- stock css libraries -->

  {% if useCDN %}
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" charset="utf-8">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" charset="utf-8">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/animatecss/3.5.1/animate.min.css" charset="utf-8">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/angularjs-slider/6.4.0/rzslider.min.css" charset="utf-8">
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/github.min.css"> -->
  {% else %}
  <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" charset="utf-8">
  <link rel="stylesheet" href="{% static 'css/font-awesome.min.css' %}" charset="utf-8">
  <link rel="stylesheet" href="{% static 'css/animate.css' %}" charset="utf-8">
  <link rel="stylesheet" href="{% static 'css/rzslider.min.css' %}" charset="utf-8"> {% endif %}
  <link rel="stylesheet" href="{% static 'css/angular-aside.min.css' %}" charset="utf-8">
  <link rel="stylesheet" href="{% static 'css/ng-tags-input.min.css' %}" charset="utf-8">
  <link rel="stylesheet" href="{% static 'css/octicons.css' %}" charset="utf-8">
  <link rel="stylesheet" href="{% static 'css/angular-ui-switch.min.css' %}" charset="utf-8">
  <link rel="stylesheet" href="{% static 'css/ripple.min.css' %}" charset="utf-8">
  <link rel="stylesheet" href="{% static 'css/foundation-icons.css' %}" charset="utf-8">

  <!-- custom css -->
  <link rel="stylesheet" href="{% static 'css/custom/base.css' %}" charset="utf-8">
  <link rel="stylesheet" href="{% static 'css/custom/navbarControls.css' %}" charset="utf-8">




  <style media="screen">
    @media only screen and (max-width: 670px) {

      .navbarControls .dropdown {
        margin-top: 10px !important;
      }
      .newsFeed {
        padding-top: 150px;
      }
      .messageBox {
        padding-top: 150px;
      }
      .maxChatHeight {
        height: 72vh;
      }

      .topSpace {
        padding-top: 150px;
        height: 190px;
      }
    }


    @media only screen and (min-width: 670px) {

      .newsFeed {
        padding-top: 70px;
      }
      .messageBox {
        padding-top: 70px;
      }
      .maxChatHeight {
        height: 85vh;
      }
      .topSpace {
        padding-top: 60px;
        height: 100px;
      }
    }

    .navDropDownList>li>ul {
      height: 400px;
      width: 400px;
      overflow: auto;
      list-style: outside none none;
      box-sizing: border-box;
      display: block;
    }

    .navDropDownList>a {
      position: relative;
      left: 10px;
      text-decoration: none;
    }

    .navBarInfoList:hover,
    .navBarInfoList:focus {
      border-left-color: #ffb206;
      cursor: pointer;
      background: #f5f5f5;
    }

    .navBarInfoList {
      border-left-style: solid;
      border-left-width: 6px;
      border-left-color: #ffffff;
      box-sizing: border-box;
      display: block;
      height: 60px;
      border-bottom-color: #ebe7e7;
      border-bottom-style: solid;
      border-bottom-width: thin;
    }

    .navBarInfoList>a {
      color: #1266b4;
    }

    .bar {
      width: 20px;
      height: 3px;
      background-color: #ffffff;
      margin: 6px 0;
    }

    .chatBox:hover {
      background-color: #e0e0e0;
    }
  </style>


</head>

<body style="background:#ffffff;">

  <div flash-message="4000" style="position:fixed;top:70px;right:10px;z-index:9999;min-width:300px;"></div>
  {% include 'app.social.header.html' %} {% verbatim %}
  <!-- all the new content here -->

  <div class="container-fluid">
    <div class="row">
      <div class="col-xs-12 col-md-3 col-md-offset-1 col-sm-12">
        <div class="row topSpace" style=" border-bottom:1px solid #e0e0e0;">
          <div class="col-xs-10">
            <input ng-if="mode=='search'" type="text" name="" value="" class="form-control" placeholder="search contacts..">
          </div>
          <div class="col-xs-2">

            <i ng-if="mode=='list'" class="fa fa-search fa-lg" aria-hidden="true" ng-click="search();"  ></i>
            <i ng-if="mode=='search'" ng-click="closeSearch();" class="fa fa-times fa-lg" aria-hidden="true" ng-click="search();"  ></i>
          </div>
        </div>
          <div class="row" style="height:85vh; overflow-y:auto; overflow-x:hidden;">

            <div class="row chatBox" ng-repeat="people in peoples" ng-click="setInView($index)" style="padding-bottom:5px; padding-top:5px; padding-left:15px;">
              <div class="col-xs-2" style="padding:0px;">
                <img src="/static/images/img_avatar.png" class="img-circle" width="50" height="50" alt="">
              </div>
              <div class="col-xs-8 " style="padding-top:10px;">
                <span>{{people.name}}</span> <br>
                <span ng-if="people.messages.slice(-1)[0].msg" class="text-muted" style="font-size:11px;"> {{people.messages.slice(-1)[0].msg}}</span>
                <span ng-if="people.messages.slice(-1)[0].img" class="text-muted" style="font-size:11px;">Image</span>
              </div>
              <div class="col-xs-2 " style="padding:20px; padding-bottom:0px;">
                <span class="text-muted pull-right" style="font-size:10px;">21 mins</span>
              </div>
            </div>
          </div>

      </div>
      <div class="col-md-7 hidden-xs hidden-sm" style="border-left:2px solid #e0e0e0;">
        <div class="row topSpace text-center" style="border-bottom:1px solid #e0e0e0;">
          <span style="font-size:20px;">{{peoples[peopleInView].name}}</span>
        </div>
        <div style="height:81vh; overflow-y:auto; overflow-x:hidden;">
          <div class="row" ng-repeat="message in peoples[peopleInView].messages">
            <div class="container-fluid pull-right" ng-if="message.msg">
              <div class="container-fluid text-right" style="border:solid 1px #e0e0e0;padding:10px;">
                <span>{{message.msg}}</span>
              </div>
              <div class="container-fluid text-right" style="color:#c7c7c7;font-size:10px;">
                0 min ago
              </div>
            </div>


            <div class="container-fluid pull-right" ng-if="message.img">
              <div class="container-fluid text-right" style="border:solid 1px #e0e0e0;padding:10px;">
                <span ng-if="message.img"><img ng-click="expandImage(message.img);" src="{{message.img}}" width="250px;" height="250;" alt=""></span>
              </div>
              <div class="container-fluid text-right" style="color:#c7c7c7;font-size:10px;">
                0 min ago
              </div>
            </div>

          </div>
        </div>


        <div class="row">
          <div class="input-group" style=" border-top:2px solid #e0e0e0;">
            <input type="text" class="form-control" style="border:none; border-radius: 0px;" placeholder="Type your text here?" ng-enter="sendMessage();" ng-model="textReply">
            <input type="file" id="filePicker" style="display:none;">
            <span class="input-group-addon btn btn-default" style="border:none; border-radius: 0px;" ng-click="addFile()"><i class="fa fa-paperclip" aria-hidden="true" ></i></span>
            <span class="input-group-addon btn btn-default" style="border:none; border-radius: 0px;" ng-click="sendMessage();"><i class="fa fa-paper-plane" aria-hidden="true" ></i></span>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endverbatim %}
  <!-- all the new content here -->



  {% if useCDN %}
  <script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.17/angular-ui-router.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-sanitize/1.4.9/angular-sanitize.min.js"></script>
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/1.1.2/ui-bootstrap-tpls.min.js"></script> -->
  <!-- <script src="https://autobahn.s3.amazonaws.com/autobahnjs/latest/autobahn.min.jgz"></script> -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tinymce/4.3.4/tinymce.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-audio/1.7.2/angular.audio.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angularjs-slider/6.4.0/rzslider.min.js"></script>
  <script src="https://cdn.jsdelivr.net/lodash/4.5.1/lodash.min.js"></script>
  {% else %}
  <script src="{% static 'js/jquery-2.1.4.min.js' %}"></script>
  <script src="{% static 'js/jquery.cookie-1.4.1.min.js' %}"></script>
  <script src="{% static 'js/bootstrap.min.js' %}"></script>
  <script src="{% static 'js/angular.min.js' %}"></script>
  <script src="{% static 'js/angular-ui-router.min.js' %}"></script>
  <script src="{% static 'js/angular-sanitize.min.js' %}"></script>



  <script src="{% static 'js/tinymce.min.js' %}"></script>


  <script src="{% static 'js/angular.audio.min.js' %}"></script>
  <script src="{% static 'js/rzslider.min.js' %}"></script>
  <script src="{% static 'js/lodash.js' %}"></script>
  {% endif %}

  <!-- <script src="{% static 'js/angular-google-maps.min.js' %}"></script> -->
  <script src="{% static 'js/autobahn.min.js' %}"></script>
  <script src="{% static 'js/ui-bootstrap-tpls-0.14.3.min.js' %}"></script>
  <script src="{% static 'js/angular-bootstrap-confirm.min.js' %}"></script>
  <script src="{% static 'js/ng-tinymce.js' %}"></script>
  <script src="{% static 'js/ng-tags-input.min.js' %}"></script>
  <script src="{% static 'js/angular-simple-logger.min.js' %}"></script>
  <script src="{% static 'js/angular-flash.js' %}"></script>
  <script src="{% static 'js/ngDraggable.js' %}"></script>
  <script src="{% static 'js/angular-aside.min.js' %}"></script>
  <script src="{% static 'js/angular-ui-switch.min.js' %}"></script>
  <!-- Custom JS files -->
  <script type="text/javascript">
    var wampServer = '{{wampServer}}';
    var wampBindName = "{{user.username}}";
    var BRAND_LOGO = "{{BRAND_LOGO}}";
  </script>
  <script src="{% static 'js/custom/wampProcessors.js' %}"></script>
  <script src="{% static 'js/custom/nativeJS.js' %}"></script>
  <script src="{% static 'js/app.social.socialMessages.js' %}"></script>
  <script src="{% static 'js/custom/directives.js' %}"></script>
  <script src="{% static 'js/custom/directives.native.js' %}"></script>
  <script src="{% static 'js/custom/filters.js' %}"></script>
  <script src="{% static 'js/custom/services.js' %}"></script>


</body>

</html>
