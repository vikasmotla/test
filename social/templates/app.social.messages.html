{% extends 'app.socialBase.html' %}
{% load staticfiles %}

{% block contentBody %}
{% verbatim %}
<!-- all the new content here -->

<div class="container-fluid">
  <div class="row">
    <div class="col-xs-12 col-md-3 col-md-offset-1 col-sm-12">
      <div class="row topSpace" style=" border-bottom:1px solid #e0e0e0;">
        <div class="col-xs-10">
          <input ng-if="mode=='search'" type="text" name="" value="" class="form-control" placeholder="search contacts..">
        </div>
        <div class="col-xs-2">

          <i ng-if="mode=='list'" class="fa fa-search fa-lg" aria-hidden="true" ng-click="search();"  ></i>
          <i ng-if="mode=='search'" ng-click="closeSearch();" class="fa fa-times fa-lg" aria-hidden="true" ng-click="search();"  ></i>
        </div>
      </div>
        <div class="row" style="height:85vh; overflow-y:auto; overflow-x:hidden;">

          <div class="row chatBox" ng-repeat="people in peoples" ng-click="setInView($index)" style="padding-bottom:5px; padding-top:5px; padding-left:15px;">
            <div class="col-xs-2" style="padding:0px;">
              <img src="/static/images/img_avatar.png" class="img-circle" width="50" height="50" alt="">
            </div>
            <div class="col-xs-8 " style="padding-top:10px;">
              <span>{{people.name}}</span> <br>
              <span ng-if="people.messages.slice(-1)[0].msg" class="text-muted" style="font-size:11px;"> {{people.messages.slice(-1)[0].msg}}</span>
              <span ng-if="people.messages.slice(-1)[0].img" class="text-muted" style="font-size:11px;">Image</span>
            </div>
            <div class="col-xs-2 " style="padding:20px; padding-bottom:0px;">
              <span class="text-muted pull-right" style="font-size:10px;">21 mins</span>
            </div>
          </div>
        </div>

    </div>
    <div class="col-md-7 hidden-xs hidden-sm" style="border-left:2px solid #e0e0e0;">
      <div class="row topSpace text-center" style="border-bottom:1px solid #e0e0e0;">
        <span style="font-size:20px;">{{peoples[peopleInView].name}}</span>
      </div>
      <div style="height:81vh; overflow-y:auto; overflow-x:hidden;">
        <div class="row" ng-repeat="message in peoples[peopleInView].messages">
          <div class="container-fluid pull-right" ng-if="message.msg">
            <div class="container-fluid text-right" style="border:solid 1px #e0e0e0;padding:10px;">
              <span>{{message.msg}}</span>
            </div>
            <div class="container-fluid text-right" style="color:#c7c7c7;font-size:10px;">
              0 min ago
            </div>
          </div>


          <div class="container-fluid pull-right" ng-if="message.img">
            <div class="container-fluid text-right" style="border:solid 1px #e0e0e0;padding:10px;">
              <span ng-if="message.img"><img ng-click="expandImage(message.img);" src="{{message.img}}" width="250px;" height="250;" alt=""></span>
            </div>
            <div class="container-fluid text-right" style="color:#c7c7c7;font-size:10px;">
              0 min ago
            </div>
          </div>

        </div>
      </div>


      <div class="row">
        <div class="input-group" style=" border-top:2px solid #e0e0e0;">
          <input type="text" class="form-control" style="border:none; border-radius: 0px;" placeholder="Type your text here?" ng-enter="sendMessage();" ng-model="textReply">
          <input type="file" id="filePicker" style="display:none;">
          <span class="input-group-addon btn btn-default" style="border:none; border-radius: 0px;" ng-click="addFile()"><i class="fa fa-paperclip" aria-hidden="true" ></i></span>
          <span class="input-group-addon btn btn-default" style="border:none; border-radius: 0px;" ng-click="sendMessage();"><i class="fa fa-paper-plane" aria-hidden="true" ></i></span>
        </div>
      </div>
    </div>
  </div>
</div>
{% endverbatim %}

{% endblock %}
{% block specific_js %}
<script src="{% static 'js/app.social.socialMessages.js' %}"></script>
{% endblock %}
